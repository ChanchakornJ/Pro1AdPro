<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.Group?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/24.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="se233.Project1.controller.MainViewController"
            prefWidth="750.0" prefHeight="550.0">


   <!-- ðŸ”¹ TOP: Title + Quick Actions -->
   <top>
      <VBox spacing="8" BorderPane.alignment="CENTER">
         <padding>
            <Insets top="10" left="30" right="30" bottom="10"/>
         </padding>
         <children>
            <Label text="Upload your file">
               <font>
                  <Font size="20.0"/>
               </font>
            </Label>

            <HBox fx:id="formatToolbar" spacing="10" alignment="CENTER_LEFT">
               <children>
                  <Label text="Quick Actions:"/>
                  <ComboBox fx:id="globalFormatCombo" prefWidth="120"/>
                  <Button text="Apply to Selected" onAction="#applyFormatToSelected"/>
                  <Button text="Apply to All" onAction="#applyFormatToAll"/>
               </children>
            </HBox>
         </children>
      </VBox>
   </top>

   <!-- ðŸ”¹ CENTER: Drop zone + File area side by side -->
   <center>
      <VBox spacing="15" BorderPane.alignment="CENTER">
         <padding>
            <Insets top="10" left="20" right="20" bottom="15"/>
         </padding>

         <!-- ðŸ”¹ Top Half: Drop + File Setting -->
         <HBox spacing="15" alignment="CENTER" VBox.vgrow="ALWAYS">
            <!-- ðŸ“ Drop Zone -->
            <AnchorPane fx:id="dropZone"
                        HBox.hgrow="ALWAYS"
                        style="-fx-border-color: black; -fx-border-width: 2; -fx-border-radius: 10;"
                        prefWidth="320" prefHeight="260">

            <children>
                  <Label fx:id="dropFileLabel"
                         text="Drop the file here"
                         AnchorPane.leftAnchor="0"
                         AnchorPane.rightAnchor="0"
                         AnchorPane.topAnchor="0"
                         AnchorPane.bottomAnchor="0"
                         style="-fx-alignment: center; -fx-text-fill: gray; -fx-font-size: 16;"/>
               </children>
            </AnchorPane>

            <!-- âš™ï¸ File list -->
            <VBox fx:id="settingZoneArea"
                  spacing="10"
                  HBox.hgrow="ALWAYS"
                  prefWidth="350"
                  alignment="TOP_CENTER">
               <ScrollPane fitToWidth="true"
                           VBox.vgrow="ALWAYS"
                           style="-fx-border-color: black; -fx-border-radius: 5;">
                  <content>
                     <VBox fx:id="fileSettingsContainer" spacing="5">
                        <padding>
                           <Insets top="10" right="10" bottom="10" left="10"/>
                        </padding>
                     </VBox>
                  </content>
               </ScrollPane>

               <HBox fx:id="buttonArea"
                     spacing="10"
                     alignment="CENTER_RIGHT">
                  <children>
                     <Button fx:id="convertButton"
                             text="Convert"
                             onAction="#changeFormat"
                             minWidth="100"/>
                     <Button fx:id="browseOutputButton"
                             text="Browse Output Folder"
                             onAction="#handleBrowseOutput"
                             minWidth="200"/>
                     <Pane HBox.hgrow="ALWAYS"/>
                     <Button fx:id="advancedSettingButton"
                             onAction="#handleAdvancedSetting"
                             prefHeight="30"
                             prefWidth="30"
                             style="-fx-background-color: transparent;">
                        <graphic>
                           <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                              <image>
                                 <Image url="@assets/â€”Pngtreeâ€”settings%20icon_4419959.png"/>
                              </image>
                           </ImageView>
                        </graphic>
                     </Button>
                  </children>
               </HBox>
            </VBox>
         </HBox>

         <!-- ðŸ”¹ Bottom Half: Old Loading Pane -->
         <VBox fx:id="fileProgressZonePane"
               spacing="10"
               style="-fx-border-color: #ccc; -fx-border-radius: 8;"
               VBox.vgrow="ALWAYS">
            <padding>
               <Insets top="10" left="20" right="20" bottom="10"/>
            </padding>
            <children>
               <Label text="Progress" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
               <ScrollPane fitToWidth="true" prefHeight="200">
                  <content>
                     <BorderPane fx:id="fileProgressZone" prefHeight="200.0" prefWidth="200.0">
                        <left>
                           <VBox fx:id="progressContainer" spacing="8" prefWidth="400.0" />
                        </left>
                        <right>

                        </right>
                     </BorderPane>
                  </content>
               </ScrollPane>
            </children>
         </VBox>
      </VBox>
   </center>

</BorderPane>
